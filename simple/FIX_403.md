# 403 에러 해결 가이드

## 🔍 403 에러가 발생하는 이유

1. **Flask 서버가 제대로 시작되지 않음**
2. **macOS 방화벽 차단**
3. **포트 충돌**
4. **권한 문제**

## ✅ 해결 방법

### 방법 1: 간소화 버전 사용 (권장)

새로운 간소화 버전을 만들었습니다:

```bash
python3 youtube_downloader_simple.py
```

이 버전의 장점:
- 더 간단한 코드
- 더 안정적인 Flask 설정
- 같은 기능 제공

### 방법 2: 터미널 로그 확인

프로그램 실행 시 터미널에 다음과 같은 로그가 나와야 합니다:

```
============================================================
YouTube 음원 다운로더 (FLAC)
============================================================

저장 위치: /Users/사용자명/Downloads/YouTube_Audio

브라우저에서 열기: http://127.0.0.1:5000
종료: Ctrl+C

============================================================
 * Running on http://127.0.0.1:5000
```

**만약 `* Running on...` 메시지가 안 나온다면:**
- Flask가 제대로 설치되지 않았을 수 있습니다
- 다시 설치: `pip3 install --upgrade flask`

### 방법 3: 다른 포트 사용

포트 5000이 문제라면 8080으로 변경:

**파일 수정:**
```python
# 파일 맨 아래 부분
app.run(host='127.0.0.1', port=8080, ...)  # 5000 → 8080
```

**브라우저에서 접속:**
```
http://127.0.0.1:8080
```

### 방법 4: 포트 사용 확인

포트 5000이 다른 프로그램에서 사용 중인지 확인:

```bash
lsof -i :5000
```

**사용 중이라면:**
```bash
# 해당 프로세스 종료
kill -9 [PID]
```

### 방법 5: macOS 방화벽 확인

1. 시스템 환경설정 → 보안 및 개인 정보 보호
2. 방화벽 탭
3. Python에 대한 접근 허용 확인

### 방법 6: localhost 사용

`127.0.0.1` 대신 `localhost` 사용:

```
http://localhost:5000
```

## 🧪 Flask 테스트

Flask가 제대로 작동하는지 테스트:

```bash
python3 test_flask.py
```

브라우저에서 http://127.0.0.1:5000 접속
"Flask is working!" 메시지가 보이면 Flask는 정상

## 📋 체크리스트

실행 전 확인사항:

- [ ] Flask 설치됨: `pip3 list | grep Flask`
- [ ] yt-dlp 설치됨: `pip3 list | grep yt-dlp`
- [ ] FFmpeg 설치됨: `ffmpeg -version`
- [ ] 포트 5000 사용 가능: `lsof -i :5000`
- [ ] Python 3.7 이상: `python3 --version`

## 🆘 여전히 안 되는 경우

### 디버그 모드로 실행

파일 수정:
```python
app.run(host='127.0.0.1', port=5000, debug=True, ...)  # debug=True
```

더 자세한 오류 메시지가 표시됩니다.

### 터미널 전체 로그 공유

프로그램 실행 시 나오는 모든 메시지를 확인하세요:
- 오류 메시지
- 경고 메시지
- Flask 시작 메시지

## 💡 권장 사항

1. **간소화 버전 사용**: `youtube_downloader_simple.py`
2. **가상환경 사용**:
   ```bash
   python3 -m venv venv
   source venv/bin/activate
   pip3 install flask yt-dlp
   python3 youtube_downloader_simple.py
   ```
